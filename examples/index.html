<!DOCTYPE html>
<html>
  <head>
    <title>Orchestrate Java Client</title>
    <meta charset='utf-8'>
    <meta content='A high performance, asynchronous Java client to query the Orchestrate.io service.' name='description'>
    <meta content='on' http-equiv='cleartype'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script>
      window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var method=window.analytics.methods[i];window.analytics[method]=window.analytics.factory(method)}window.analytics.load=function(t){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)},window.analytics.SNIPPET_VERSION="2.0.8",
      window.analytics.load("nkkww5j074");
      window.analytics.page('Docs', 'Java Client');
    </script>
  </head>
  <body>
    <nav>
      <h1>
        <a href="/">orchestrate.io</a>
      </h1>
      <h2>
        <a href="/">Introduction</a>
      </h2>
      <ul>
        <li>
          <a href="/#about">About Orchestrate</a>
        </li>
        <li>
          <a href="/#getting-started">Getting Started</a>
        </li>
        <li>
          <a href="/#managed-dependency">Managed Dependency</a>
        </li>
        <li>
          <a href="/#download">Download</a>
          <a href='https://github.com/orchestrate-io/orchestrate-java-client'>(GitHub)</a>
        </li>
        <li>
          <a href="/#javadoc">Javadoc</a>
          <a href='/javadoc/latest/'>(latest)</a>
        </li>
      </ul>
      <h2>
        <a href="/querying/">Querying</a>
      </h2>
      <ul>
        <li>
          <a href="/querying/#key-value">Key-Value</a>
        </li>
        <li>
          <a href="/querying/#search">Search</a>
        </li>
        <li>
          <a href="/querying/#events">Events</a>
        </li>
        <li>
          <a href="/querying/#graph">Graph</a>
        </li>
      </ul>
      <h2>
        <a href="/examples/">Examples</a>
      </h2>
      <ul>
        <li>
          <a href="/examples/#listenable-future">Listenable Future</a>
        </li>
        <li>
          <a href="/examples/#data-access-object">DAO Pattern</a>
        </li>
        <li>
          <a href="/examples/#dropwizard">Dropwizard (Managed)</a>
        </li>
        <li>
          <a href="/examples/#error-handling">Error Handling</a>
        </li>
      </ul>
      <h2>
        <a href="/advanced-options/">Advanced Options</a>
      </h2>
      <ul>
        <li>
          <a href="/advanced-options/#tuning">Tuning the Client</a>
        </li>
        <li>
          <a href="/advanced-options/#json-mapping">Custom JSON Mapping</a>
        </li>
      </ul>
      <h2>
        <a href="/feedback/">Feedback</a>
      </h2>
      <ul>
        <li>
          <a href="/feedback/#feature-proposals">Feature Proposals</a>
        </li>
        <li>
          <a href="/feedback/#debugging-requests">Debugging Requests</a>
        </li>
        <li>
          <a href="/feedback/#issues">Issues</a>
        </li>
      </ul>
    </nav>
    <div class='content'>
      <h1>Orchestrate Java Client</h1>
      <p>There are a very large number of libraries and frameworks in the Java ecosystem,
       as well as many different application development patterns used to simplify
       certain types of work.</p>
      
      <p>The examples below demonstrate how to integrate the Java client into a few of
       these patterns and frameworks.</p>
      
      <h2><a name="listenable-future"></a> Listenable Future</h2>
      
      <p>As well as making a blocking API call to Orchestrate to receive the result of
       a request to the service it&rsquo;s also possible to listen (or subscribe) for the
       result in a fully non-blocking way (i.e. &ldquo;callback style&rdquo;).</p>
      <pre class="highlight java"><span class="kd">final</span> <span class="n">DomainObject</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DomainObject</span><span class="o">();</span>&#x000A;&#x000A;<span class="kd">final</span> <span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrchestrateClient</span><span class="o">(</span><span class="s">&quot;your api key&quot;</span><span class="o">);</span>&#x000A;<span class="n">client</span><span class="o">.</span><span class="na">kv</span><span class="o">(</span><span class="s">&quot;someCollection&quot;</span><span class="o">,</span> <span class="s">&quot;someKey&quot;</span><span class="o">)</span>&#x000A;      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">obj</span><span class="o">)</span>&#x000A;      <span class="o">.</span><span class="na">on</span><span class="o">(</span><span class="k">new</span> <span class="n">ResponseAdapter</span><span class="o">&lt;</span><span class="n">KvMetadata</span><span class="o">&gt;()</span> <span class="o">{</span>&#x000A;          <span class="nd">@Override</span>&#x000A;          <span class="kd">public</span> <span class="kt">void</span> <span class="n">onFailure</span><span class="o">(</span><span class="kd">final</span> <span class="n">Throwable</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>&#x000A;              <span class="c1">// handle error condition</span>&#x000A;          <span class="o">}</span>&#x000A;&#x000A;          <span class="nd">@Override</span>&#x000A;          <span class="kd">public</span> <span class="kt">void</span> <span class="n">onSuccess</span><span class="o">(</span><span class="kd">final</span> <span class="n">KvMetadata</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>&#x000A;              <span class="c1">// do something with the result</span>&#x000A;          <span class="o">}</span>&#x000A;      <span class="o">});</span></pre>
      <h2><a name="data-access-object"></a> Data Access Object (DAO) Pattern</h2>
      
      <p>A <a href="http://en.wikipedia.org/wiki/Data_access_object">Data Access Object</a> is an
       object that provides data storage methods without exposing details of the
       database. They typically provide at least the basic persistence operations,
       possibly with additional methods to take advantage of database specific
       functionality.</p>
      <pre class="highlight java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyObjectDao</span> <span class="o">{</span>&#x000A;&#x000A;    <span class="kd">public</span> <span class="n">MyObject</span> <span class="n">findOne</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* some logic */</span> <span class="o">}</span>&#x000A;&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">save</span><span class="o">(</span><span class="kd">final</span> <span class="n">MyObject</span> <span class="n">myObject</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* some logic */</span> <span class="o">}</span>&#x000A;&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">delete</span><span class="o">(</span><span class="kd">final</span> <span class="n">MyObject</span> <span class="n">myObject</span><span class="o">)</span> <span class="o">{</span> <span class="cm">/* some logic */</span> <span class="o">}</span>&#x000A;&#x000A;    <span class="c1">// etc ..</span>&#x000A;<span class="o">}</span></pre>
      <p>Instead of you creating this code for every data type in your Java application&rsquo;s
       model, the Java client bundles a generic implementation of this pattern. It
       implements the DAO pattern for you while exposing the <em>asynchronous</em>
       operation.</p>
      <pre class="highlight java"><span class="kn">import</span> <span class="nn">io.orchestrate.client.dao.GenericAsyncDao</span><span class="o">;</span>&#x000A;&#x000A;<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyObjectDao</span> <span class="kd">extends</span> <span class="n">GenericAsyncDao</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="o">{</span>&#x000A;&#x000A;    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Client</span> <span class="n">client</span><span class="o">;</span>&#x000A;&#x000A;    <span class="kd">public</span> <span class="n">MyObjectDao</span><span class="o">(</span><span class="kd">final</span> <span class="n">Client</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>&#x000A;        <span class="kd">super</span><span class="o">(</span><span class="n">client</span><span class="o">,</span> <span class="s">&quot;myCollection&quot;</span><span class="o">,</span> <span class="n">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>&#x000A;        <span class="k">this</span><span class="o">.</span><span class="na">client</span> <span class="o">=</span> <span class="n">client</span><span class="o">;</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;<span class="o">}</span></pre>
      <p>Using the <code>MyObjectDao</code> object shown above, writing data to the service becomes
       even easier.</p>
      <pre class="highlight java"><span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrchestrateClient</span><span class="o">(</span><span class="s">&quot;your api key&quot;</span><span class="o">);</span>&#x000A;<span class="n">MyObjectDao</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyObjectDao</span><span class="o">(</span><span class="n">client</span><span class="o">);</span>&#x000A;&#x000A;<span class="c1">// save my object</span>&#x000A;<span class="n">KvMetadata</span> <span class="n">kvMetadata</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="n">MyObject</span><span class="o">());</span></pre>
      <p>You can read more about the <code>GenericAsyncDao</code> in the
       <a href="/javadoc/latest/io/orchestrate/client/dao/GenericAsyncDao.html">javadocs</a>.</p>
      
      <h2><a name="dropwizard"></a> Dropwizard (Managed)</h2>
      
      <p><a href="http://dropwizard.codahale.com/">Dropwizard</a> is a Java framework for developing
       ops-friendly, high-performance, RESTful web services. If you&rsquo;ve not come across
       it before, we&rsquo;re a fan of it, it&rsquo;s well worth checking out.</p>
      
      <p>The Dropwizard framework has the concept of a
       &ldquo;<a href="http://dropwizard.codahale.com/manual/core/#managed-objects">Managed Object</a>&rdquo;
       which are objects that control resources that need to be allocated and stopped
       as necessary. This is done by implementing the <code>Managed</code> interface.</p>
      <pre class="highlight java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrchestrateClientManager</span> <span class="kd">implements</span> <span class="n">Managed</span> <span class="o">{</span>&#x000A;&#x000A;    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Client</span> <span class="n">client</span><span class="o">;</span>&#x000A;&#x000A;    <span class="kd">public</span> <span class="n">OrchestrateClientManager</span><span class="o">(</span><span class="kd">final</span> <span class="n">Client</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>&#x000A;        <span class="k">this</span><span class="o">.</span><span class="na">client</span> <span class="o">=</span> <span class="n">client</span><span class="o">;</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;    <span class="nd">@Override</span>&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">start</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#x000A;        <span class="c1">// nothing to do here</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;    <span class="nd">@Override</span>&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">stop</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#x000A;        <span class="n">client</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;<span class="o">}</span></pre>
      <p>Configuring the Java client for Dropwizard is easy.</p>
      
      <h2><a name="error-handling"></a> Error Handling</h2>
      
      <p>When you call <code>get</code> an OrchestrateRequest, the client will block for the result. You
       may still register listeners that are run when the result is received from the
       service, even if you ultimately call <code>get</code> to block waiting for the result.</p>
      
      <p>When you receive a result it will throw an exception if the client could not
       complete the request or the result could not be deserialized from JSON. In all
      cases an unchecked exception will be thrown.</p>
      
      <p>This is done primarily because usually the client can not recover from a bad
       operation, it is likely to be a programming error or a networking problem while
       making the HTTP request. As a result, forcing developers to catch a checked
       exception can result in unnecessary code in a <code>catch()</code> block.</p>
      
      <p>To listen for an error in the request you can use a <code>ResponseListener</code>.</p>
      <pre class="highlight java"><span class="kn">import</span> <span class="nn">io.orchestrate.client.ResponseListener</span><span class="o">;</span>&#x000A;&#x000A;<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyObjectResponseListener</span> <span class="kd">implements</span> <span class="n">ResponseListener</span><span class="o">&lt;</span><span class="n">MyObject</span><span class="o">&gt;</span> <span class="o">{</span>&#x000A;&#x000A;    <span class="nd">@Override</span>&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onFailure</span><span class="o">(</span><span class="kd">final</span> <span class="n">Throwable</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>&#x000A;        <span class="cm">/* do something */</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;    <span class="nd">@Override</span>&#x000A;    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onSuccess</span><span class="o">(</span><span class="kd">final</span> <span class="n">Boolean</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>&#x000A;    <span class="o">}</span>&#x000A;&#x000A;<span class="o">}</span></pre>
      <p>You can read more about the <code>ResponseListener</code> in the
       <a href="/javadoc/latest/io/orchestrate/client/ResponseListener.html">javadocs</a>.</p>
      <footer>Orchestrate.io &copy; 2014</footer>
    </div>
  </body>
</html>
